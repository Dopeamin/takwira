{% extends "base.html.twig" %}

{% block body %}
    <style>
* {box-sizing: border-box}
body {font-family: Verdana, sans-serif; margin:0}
.mySlides {display: none}
img {vertical-align: middle;}
.form_container{
    width:100%;
    margin:auto;
    background-color:gray;
    height:300px;
}
/* Slideshow container */
.slideshow-container {
  max-width: 100%;
  height:300px;
  position: relative;
  margin: auto;
}

/* Next & previous buttons */
.prev, .next {
  cursor: pointer;
  position: absolute;
  top: 50%;
  width: auto;
  padding: 16px;
  margin-top: -22px;
  color: white;
  font-weight: bold;
  font-size: 18px;
  transition: 0.6s ease;
  border-radius: 0 3px 3px 0;
  user-select: none;
}
#maCarte{
                height:500px;
                margin-top:100px;
            }
/* Position the "next button" to the right */
.next {
  right: 0;
  border-radius: 3px 0 0 3px;
}

/* On hover, add a black background color with a little bit see-through */
.prev:hover, .next:hover {
  background-color: rgba(0,0,0,0.8);
}

/* Caption text */
.text {
  color: #f2f2f2;
  font-size: 15px;
  padding: 8px 12px;
  position: absolute;
  bottom: 8px;
  width: 100%;
  text-align: center;
}

/* Number text (1/3 etc) */
.numbertext {
  color: #f2f2f2;
  font-size: 12px;
  padding: 8px 12px;
  position: absolute;
  top: 0;
}

/* The dots/bullets/indicators */
.dot {
  cursor: pointer;
  height: 10px;
  width: 10px;
  margin: 0 2px;
  background-color: #bbb;
  border-radius: 50%;
  display: inline-block;
  transition: background-color 0.6s ease;
}

.active, .dot:hover {
  background-color: #717171;
}

/* Fading animation */
.fade {
  -webkit-animation-name: fade;
  -webkit-animation-duration: 1.5s;
  animation-name: fade;
  animation-duration: 1.5s;
}
.contt{
    max-width:1200px;
    width:100%;
    margin:auto;
    position:relative;
    text-align:center;
    top:70px;
}
@-webkit-keyframes fade {
  from {opacity: .4} 
  to {opacity: 1}
}

@keyframes fade {
  from {opacity: .4} 
  to {opacity: 1}
}

/* On smaller screens, decrease text size */
@media only screen and (max-width: 300px) {
  .prev, .next,.text {font-size: 11px}
}
.card{
    margin:0px;
    margin-top:20px;
    float:none;
    display:inline-block;
    text-align:left;
    margin-right:10px;
    margin-left:10px;
    color:black;
    border-radius:3px;
    height:auto;
    width:300px;
    vertical-align:top;
}
.button2{
    background-color:white;
    border:3px solid black;
    color:black;
}
.button2:hover{
    cursor:pointer;
    background-color:black;
    color:white;
}
#maCarte{
  z-index:10;
}
</style>




<script>
var slideIndex = 1;
showSlides(slideIndex);

function plusSlides(n) {
  showSlides(slideIndex += n);
}

function currentSlide(n) {
  showSlides(slideIndex = n);
}

function showSlides(n) {
  var i;
  var slides = document.getElementsByClassName("mySlides");
  var dots = document.getElementsByClassName("dot");
  if (n > slides.length) {slideIndex = 1}    
  if (n < 1) {slideIndex = slides.length}
  for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";  
  }
  for (i = 0; i < dots.length; i++) {
      dots[i].className = dots[i].className.replace(" active", "");
  }
  slides[slideIndex-1].style.display = "block";  
  dots[slideIndex-1].className += " active";
}
</script>
{% for message in app.flashes('failure') %}
            <div class="alert" id="error">
                {{ message }}
            </div>
        {% endfor %}
<script>
  
</script>
    <div class="form_container">
    <div class="left">  
        <div class="slideshow-container">
        <div class="mySlides fade" style="display:block">
        <img src="{{asset('uploads/brochures/' ~ stade.brochureFilename)}}" style="width:100%;height:300px;object-fit:cover">
        </div>
        <div class="mySlides fade">
        <img src="{{asset('uploads/brochures/' ~ stade.brochureFilename2)}}" style="width:100%;height:300px;object-fit:cover">
        </div>
        <div class="mySlides fade">
        <img src="{{asset('uploads/brochures/' ~ stade.brochureFilename3)}}" style="width:100%;height:300px;object-fit:cover">
        </div>
<a class="prev" onclick="plusSlides(-1)">&#10094;</a>
<a class="next" onclick="plusSlides(1)">&#10095;</a>

</div>
<br>

<div style="text-align:center">
  <span class="dot" onclick="currentSlide(1)"></span> 
  <span class="dot" onclick="currentSlide(2)"></span> 
  <span class="dot" onclick="currentSlide(3)"></span> 
</div> 
</div>
</div>
<style>
  .alert{
    position:fixed;
    margin:auto;
    text-align:center;
    left:50%;
    transform:translateX(-50%);
    padding:10px; 
    background-color:#eb6565;
    color:white;
    z-index:300;
  }
</style>

<div class="contt">
        <div class="card" style="max-width:500px;width:500px;">
        <h3 style="color : #03EB8E">{{stade.stadeLocation}}</h3>
        <h1>{{stade.stadeName}}{% if average != NULL %}
                        {% for i in 1 .. average %}
                            <img style="width:30px" src="{{asset('assets/star.svg')}}"/>
                        {% endfor %}
                    {% endif %}
                    </h1>
                    </br>
        <p>{{stade.stadeDescription}}</p>
        <div class="button" id="window_trigger"style="padding:10px;display:inline-block;color:black;margin-top:20px;">
            Order Now
        </div>
        {% if (exists == false) %}
        <div class="tobe">
        <style>
          .br-theme-bars-movie .br-widget a{
            background-color:#abe3c4;
          }
          .br-theme-bars-movie .br-widget a.br-active,.br-theme-bars-movie .br-widget a.br-selected{
            background-color:#04cc7c;
          }
          .br-theme-bars-movie .br-widget .br-current-rating{
            color:#04cc7c;
          }
          .br-wrapper .br-theme-bars-movie, .br-widget{
            display:inline-block;
          }
          .tobe{
            vertical-align:bottom;
            display:inline-block;
          }
        </style>
    <select id="example">
    <option value="1">Bad</option>
    <option value="2">Mediocre</option>
    <option value="3">Good</option>
    <option value="4">Awesome</option>

    </select>
  </div> 
        {% endif %}
        </br> 
        </div>
        <div style="display:inline-block">
            <div class="card" style="text-align:center">
                <h2 style="color : #03EB8E">Contact Info</h2>
                <h3>Owner</h3>
                <p>{{stade.stadeOwner}}</p>
                <h3>Phone</h3>
                <p>{{stade.stadePhone}}</p>
            </div>
             <div class="card"style="text-align:left;display:block;font-family:'Metropolis'">
                <h2 style="color : #03EB8E">Technical Details</h2>
                <h3>Adresse</h3>
                <p>{{stade.adresse}}</p>
                <h3>Superficie</h3>
                <p>{{stade.superficie}}m²</p>
                <h3>Supplements</h3>
                <p>{{stade.supplements}}</p>
             </div>
            <a href="{{path('stadiumCpanel',{'id':stade.id})}}"<div class="button" id="window_trigger"style="text-decoration:none;padding:10px;display:inline-block;color:black;margin-top:20px;">
            Connect As Owner
            </div></a>
        </div>
        <style>
        #calendar{
            width:80% !important;
            min-width:300px;
            margin-top:100px !important;
            margin-bottom:50px !important;
            margin:auto;
            height:570px;
            font-family:'Metropolis',sans-serif;
        }
        #calendar button{
            background-color:lightgreen;
        }
    </style>
    <div id='calendar'></div>
    <script>

      document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
          expandRows:true,
          headerToolbar: {
                center: 'dayGridMonth,timeGridWeek' // buttons for switching between views
            },
          start: 'title', // will normally be on the left. if RTL, will be on the right
  end: 'today prev,next', // will normally be on the right. if RTL, will be on the left
          initialView: 'timeGridWeek',allDaySlot: false,slotMinTime: "08:00:00",slotMaxTime: "18:00:00",slotDuration: "01:30:00",locale:'fr',timeZone:'Europe/paris',
            events:{{data.date|raw}}
        });
        calendar.render();
      });
        
    </script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.5.1/main.min.js" integrity="sha256-rPPF6R+AH/Gilj2aC00ZAuB2EKmnEjXlEWx5MkAp7bw=" crossorigin="anonymous"></script>

       <h1 style="font-family:'Metropolis',sans-serif;text-align:center">Location</h1>
</div>  
<div id="maCarte">

        </div> 
 <div class="contt" style="padding-bottom:20px;">
  <h1 style="font-family:'Metropolis',sans-serif">Comments</h1>
  <style>
    .writecomment{
      width:80%;
      margin:auto;
    }
    .writecomment input{
      margin-top:30px;
      width:80%;
      padding:10px;
      display:inline-block;
    }
    .writecomment button{
      background-color:transparent;
      padding:10px;
      vertical-align:bottom;
      padding-right:15px;
      padding-left:15px;
      margin-left:-7px;
      border:1px solid darkgrey;
      border-left:0px;
      border-radius:0px;
      display:inline-block;
    }
    .writecomment button:hover{
      cursor:pointer;
    }
    .comment{
      font-family:"Metropolis",sans-serif;
      width:70%;
      padding:10px;
      border:1px solid darkgrey;
      text-align:left;
      margin:auto;
      margin-top:30px;
      margin-bottom:0px;
      border-radius:3px;
    }
  </style>
  {% if is_granted('ROLE_USER') %}
  <div class="writecomment">
    
      {{form_start(form)}}
      {{form_widget(form.content)}}
      {{form_widget(form.Submit)}}
      {{form_end(form)}}
  </div>
  {% endif %}
  {% for comment in comments %}
  <div class="comment">
    <h2>{{comment.user.userName}}</h2>
    <p>{{comment.date|date('Y-m-d - h:i')}}</p>
    <p>{{comment.content}}</p>
  </div>
  {% endfor %}
  <style>
    .order{
      position:fixed;
      width:100%;
      height:100%;
      background-color:#000000a8;
      top:0px;
      left:0px;
      z-index:300;
      display:none;
    }  
    .orderr{
      
      width:300px;
      height:auto;
      background-color:white;
      margin:auto;
      margin-top:100px;
      opacity:1 !important;
      padding:10px;
    }
    .orderr{
      font-family:'Open Sans',sans-serif;
    }
    .orderr div{
      margin-top:10px;
    }
    #exitt:hover{
      cursor:pointer;
      color:green;
    }
  </style>
  <div class="order">
    <div class="orderr">
        <p id="exitt">X</p>
        <h1 style="color:#03EB8E;font-family:'Monsterrat',sans-serif;">Order</h1>
        {{form(orderForm)}}
    </div>
  </div>   

   
{% endblock %}
{% block footer %}
<script src="/jquery-bar-rating-master/dist/jquery.barrating.min.js"></script>
<script type="text/javascript">
   $(function() {
      $('#example').barrating({
        theme: 'bars-movie',
        onSelect: function(value, text, event) {
          if (typeof(event) !== 'undefined') {
            // rating was selected by a user
            window.location.href = "{{ app.request.uri }}/rating?rating="+value;
          }
        }
      });
   });
</script>
        <script>
            var i=0;
            $('#window_trigger').on('click',function(){
              {% if is_granted("ROLE_USER") %}
              window.location = "{{absolute_url(stade.id ~ '/order')}}";
              i=1;
              {% else %}
              window.location = "{{url('login')}}";
              {% endif %}
            })
            $('#window_trigger2').on('click',function(){
              {% if is_granted("ROLE_USER") %}
              window.location = "{{absolute_url(stade.id ~ '/order')}}";
              i=1;
              {% else %}
              window.location = "{{url('login')}}";
              {% endif %}
            })
            $(document).keyup(function(e) {
                if(e.keyCode == 27 && i==1) {
                    $('.order').fadeOut(500);
                    i=0;
                }
            });
            $('#exitt').on('click',function(){
              if(i==1) {
                    $('.order').fadeOut(500);
                    i=0;
              }  
            })
            $(".alert").delay(3000).fadeOut(1000);
            var carte = L.map('maCarte').setView([{{stade.x}}, {{stade.y}}], 13);
            L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZG9wZWFtaW5lIiwiYSI6ImNrbDBxY3BqNDBxZGUyb21sb2Vmbmxmd3AifQ.pPfJhtdnuRWMHgw0K4Jrog', {
                attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
                maxZoom: 18,
                id: 'mapbox/streets-v11',
                tileSize: 512,
                zoomOffset: -1,
                accessToken: 'your.mapbox.access.token'
            }).addTo(carte);
            var marker= L.marker([{{stade.x}}, {{stade.y}}]).addTo(carte);
            marker.bindPopup("<h1>{{stade.stadeName}} </h1>");
        </script>

{% endblock %}